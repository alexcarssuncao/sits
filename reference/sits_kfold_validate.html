<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Cross-validate time series samples — sits_kfold_validate • sits</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/IBM_Plex_Serif-0.4.10/font.css" rel="stylesheet"><link href="../deps/IBM_Plex_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Cross-validate time series samples — sits_kfold_validate"><meta name="description" content="Splits the set of time series into training and validation and
perform k-fold cross-validation."><meta property="og:description" content="Splits the set of time series into training and validation and
perform k-fold cross-validation."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sits</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.5.3-1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/e-sensing/sits/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Cross-validate time series samples</h1>
      <small class="dont-index">Source: <a href="https://github.com/e-sensing/sits/blob/HEAD/R/sits_validate.R" class="external-link"><code>R/sits_validate.R</code></a></small>
      <div class="d-none name"><code>sits_kfold_validate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Splits the set of time series into training and validation and
perform k-fold cross-validation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sits_kfold_validate</span><span class="op">(</span></span>
<span>  <span class="va">samples</span>,</span>
<span>  folds <span class="op">=</span> <span class="fl">5L</span>,</span>
<span>  ml_method <span class="op">=</span> <span class="fu"><a href="sits_rfor.html">sits_rfor</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  filter_fn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  impute_fn <span class="op">=</span> <span class="fu"><a href="impute_linear.html">impute_linear</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  multicores <span class="op">=</span> <span class="fl">2L</span>,</span>
<span>  gpu_memory <span class="op">=</span> <span class="fl">4L</span>,</span>
<span>  batch_size <span class="op">=</span> <span class="fl">2L</span><span class="op">^</span><span class="va">gpu_memory</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-samples">samples<a class="anchor" aria-label="anchor" href="#arg-samples"></a></dt>
<dd><p>Time series.</p></dd>


<dt id="arg-folds">folds<a class="anchor" aria-label="anchor" href="#arg-folds"></a></dt>
<dd><p>Number of partitions to create.</p></dd>


<dt id="arg-ml-method">ml_method<a class="anchor" aria-label="anchor" href="#arg-ml-method"></a></dt>
<dd><p>Machine learning method.</p></dd>


<dt id="arg-filter-fn">filter_fn<a class="anchor" aria-label="anchor" href="#arg-filter-fn"></a></dt>
<dd><p>Smoothing filter to be applied - optional
(closure containing object of class "function").</p></dd>


<dt id="arg-impute-fn">impute_fn<a class="anchor" aria-label="anchor" href="#arg-impute-fn"></a></dt>
<dd><p>Imputation function to remove NA.</p></dd>


<dt id="arg-multicores">multicores<a class="anchor" aria-label="anchor" href="#arg-multicores"></a></dt>
<dd><p>Number of cores to process in parallel.</p></dd>


<dt id="arg-gpu-memory">gpu_memory<a class="anchor" aria-label="anchor" href="#arg-gpu-memory"></a></dt>
<dd><p>Memory available in GPU in GB (default = 4)</p></dd>


<dt id="arg-batch-size">batch_size<a class="anchor" aria-label="anchor" href="#arg-batch-size"></a></dt>
<dd><p>Batch size for GPU classification.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>Logical: Show progress bar?</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code><a href="https://rdrr.io/pkg/caret/man/confusionMatrix.html" class="external-link">caret::confusionMatrix</a></code> object to be used for
        validation assessment.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Cross-validation is a technique for assessing how the results
of a statistical analysis will generalize to an independent data set.
It is mainly used in settings where the goal is prediction,
and one wants to estimate how accurately a predictive model will perform.
One round of cross-validation involves partitioning a sample of data
into complementary subsets, performing the analysis on one subset
(called the training set), and validating the analysis on the other subset
(called the validation set or testing set).</p>
<p>The k-fold cross validation method involves splitting the dataset
into k-subsets. For each subset is held out while the model is trained
on all other subsets. This process is completed until accuracy
is determine for each instance in the dataset, and an overall
accuracy estimate is provided.</p>
<p>This function returns the confusion matrix, and Kappa values.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Rolf Simoes, <a href="mailto:rolfsimoes@gmail.com">rolfsimoes@gmail.com</a></p>
<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="sits_run_examples.html">sits_run_examples</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="co"># A dataset containing a tibble with time series samples</span></span></span>
<span class="r-in"><span>    <span class="co"># for the Mato Grosso state in Brasil</span></span></span>
<span class="r-in"><span>    <span class="co"># create a list to store the results</span></span></span>
<span class="r-in"><span>    <span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co"># accuracy assessment lightTAE</span></span></span>
<span class="r-in"><span>    <span class="va">acc_rfor</span> <span class="op">&lt;-</span> <span class="fu">sits_kfold_validate</span><span class="op">(</span></span></span>
<span class="r-in"><span>        <span class="va">samples_modis_ndvi</span>,</span></span>
<span class="r-in"><span>        folds <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>        ml_method <span class="op">=</span> <span class="fu"><a href="sits_rfor.html">sits_rfor</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co"># use a name</span></span></span>
<span class="r-in"><span>    <span class="va">acc_rfor</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"Rfor"</span></span></span>
<span class="r-in"><span>    <span class="co"># put the result in a list</span></span></span>
<span class="r-in"><span>    <span class="va">results</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">acc_rfor</span></span></span>
<span class="r-in"><span>    <span class="co"># save to xlsx file</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="sits_to_xlsx.html">sits_to_xlsx</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        <span class="va">results</span>,</span></span>
<span class="r-in"><span>        file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"accuracy_mato_grosso_dl_"</span>, fileext <span class="op">=</span> <span class="st">".xlsx"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rolf Simoes, Gilberto Camara, Felipe Souza, Felipe Carlos.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

