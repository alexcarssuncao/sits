<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Reclassify a classified cube — sits_reclassify • sits</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/IBM_Plex_Serif-0.4.10/font.css" rel="stylesheet"><link href="../deps/IBM_Plex_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reclassify a classified cube — sits_reclassify"><meta name="description" content="Apply a set of named expressions to reclassify a classified image.
The expressions should use character values to refer to labels in
logical expressions."><meta property="og:description" content="Apply a set of named expressions to reclassify a classified image.
The expressions should use character values to refer to labels in
logical expressions."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sits</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.5.3-1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="https://e-sensing.github.io/sitsbook/">Book</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/e-sensing/sits/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Reclassify a classified cube</h1>
      <small class="dont-index">Source: <a href="https://github.com/e-sensing/sits/blob/HEAD/R/sits_reclassify.R" class="external-link"><code>R/sits_reclassify.R</code></a></small>
      <div class="d-none name"><code>sits_reclassify.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Apply a set of named expressions to reclassify a classified image.
The expressions should use character values to refer to labels in
logical expressions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sits_reclassify</span><span class="op">(</span><span class="va">cube</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'class_cube'</span></span>
<span><span class="fu">sits_reclassify</span><span class="op">(</span></span>
<span>  <span class="va">cube</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  <span class="va">mask</span>,</span>
<span>  <span class="va">rules</span>,</span>
<span>  memsize <span class="op">=</span> <span class="fl">4L</span>,</span>
<span>  multicores <span class="op">=</span> <span class="fl">2L</span>,</span>
<span>  <span class="va">output_dir</span>,</span>
<span>  version <span class="op">=</span> <span class="st">"v1"</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">sits_reclassify</span><span class="op">(</span><span class="va">cube</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-cube">cube<a class="anchor" aria-label="anchor" href="#arg-cube"></a></dt>
<dd><p>Image cube to be reclassified (class = "class_cube")</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other parameters for specific functions.</p></dd>


<dt id="arg-mask">mask<a class="anchor" aria-label="anchor" href="#arg-mask"></a></dt>
<dd><p>Image cube with additional information
to be used in expressions (class = "class_cube").</p></dd>


<dt id="arg-rules">rules<a class="anchor" aria-label="anchor" href="#arg-rules"></a></dt>
<dd><p>Expressions to be evaluated (named list).</p></dd>


<dt id="arg-memsize">memsize<a class="anchor" aria-label="anchor" href="#arg-memsize"></a></dt>
<dd><p>Memory available for classification in GB
(integer, min = 1, max = 16384).</p></dd>


<dt id="arg-multicores">multicores<a class="anchor" aria-label="anchor" href="#arg-multicores"></a></dt>
<dd><p>Number of cores to be used for classification
(integer, min = 1, max = 2048).</p></dd>


<dt id="arg-output-dir">output_dir<a class="anchor" aria-label="anchor" href="#arg-output-dir"></a></dt>
<dd><p>Directory where files will be saved
(character vector of length 1 with valid location).</p></dd>


<dt id="arg-version">version<a class="anchor" aria-label="anchor" href="#arg-version"></a></dt>
<dd><p>Version of resulting image (character).</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>Set progress bar??</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class "class_cube" (reclassified cube).</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Reclassification of a remote sensing map refers
to changing the classes assigned to different pixels in the image.
Reclassification involves assigning new classes to pixels based
on additional information from a reference map.
Users define rules according to the desired outcome.
These rules are then applied to the classified map to produce
a new map with updated classes.</p>
<p><code>sits_reclassify()</code> allow any valid R expression to compute
reclassification. User should refer to <code>cube</code> and <code>mask</code>
to construct logical expressions.
Users can use can use any R expression that evaluates to logical.
<code>TRUE</code> values will be relabeled to expression name.
Updates are done in asynchronous manner, that is, all expressions
are evaluated using original classified values. Expressions are
evaluated sequentially and resulting values are assigned to
output cube. Last expressions has precedence over first ones.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Rolf Simoes, <a href="mailto:rolfsimoes@gmail.com">rolfsimoes@gmail.com</a></p>
<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="sits_run_examples.html">sits_run_examples</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="co"># Open mask map</span></span></span>
<span class="r-in"><span>    <span class="va">data_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/raster/prodes"</span>, package <span class="op">=</span> <span class="st">"sits"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">prodes2021</span> <span class="op">&lt;-</span> <span class="fu"><a href="sits_cube.html">sits_cube</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        source <span class="op">=</span> <span class="st">"USGS"</span>,</span></span>
<span class="r-in"><span>        collection <span class="op">=</span> <span class="st">"LANDSAT-C2L2-SR"</span>,</span></span>
<span class="r-in"><span>        data_dir <span class="op">=</span> <span class="va">data_dir</span>,</span></span>
<span class="r-in"><span>        parse_info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>            <span class="st">"X1"</span>, <span class="st">"X2"</span>, <span class="st">"tile"</span>, <span class="st">"start_date"</span>, <span class="st">"end_date"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"band"</span>, <span class="st">"version"</span></span></span>
<span class="r-in"><span>        <span class="op">)</span>,</span></span>
<span class="r-in"><span>        bands <span class="op">=</span> <span class="st">"class"</span>,</span></span>
<span class="r-in"><span>        version <span class="op">=</span> <span class="st">"v20220606"</span>,</span></span>
<span class="r-in"><span>        labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>            <span class="st">"1"</span> <span class="op">=</span> <span class="st">"Forest"</span>, <span class="st">"2"</span> <span class="op">=</span> <span class="st">"Water"</span>, <span class="st">"3"</span> <span class="op">=</span> <span class="st">"NonForest"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"4"</span> <span class="op">=</span> <span class="st">"NonForest2"</span>, <span class="st">"6"</span> <span class="op">=</span> <span class="st">"d2007"</span>, <span class="st">"7"</span> <span class="op">=</span> <span class="st">"d2008"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"8"</span> <span class="op">=</span> <span class="st">"d2009"</span>, <span class="st">"9"</span> <span class="op">=</span> <span class="st">"d2010"</span>, <span class="st">"10"</span> <span class="op">=</span> <span class="st">"d2011"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"11"</span> <span class="op">=</span> <span class="st">"d2012"</span>, <span class="st">"12"</span> <span class="op">=</span> <span class="st">"d2013"</span>, <span class="st">"13"</span> <span class="op">=</span> <span class="st">"d2014"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"14"</span> <span class="op">=</span> <span class="st">"d2015"</span>, <span class="st">"15"</span> <span class="op">=</span> <span class="st">"d2016"</span>, <span class="st">"16"</span> <span class="op">=</span> <span class="st">"d2017"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"17"</span> <span class="op">=</span> <span class="st">"d2018"</span>, <span class="st">"18"</span> <span class="op">=</span> <span class="st">"r2010"</span>, <span class="st">"19"</span> <span class="op">=</span> <span class="st">"r2011"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"20"</span> <span class="op">=</span> <span class="st">"r2012"</span>, <span class="st">"21"</span> <span class="op">=</span> <span class="st">"r2013"</span>, <span class="st">"22"</span> <span class="op">=</span> <span class="st">"r2014"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"23"</span> <span class="op">=</span> <span class="st">"r2015"</span>, <span class="st">"24"</span> <span class="op">=</span> <span class="st">"r2016"</span>, <span class="st">"25"</span> <span class="op">=</span> <span class="st">"r2017"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"26"</span> <span class="op">=</span> <span class="st">"r2018"</span>, <span class="st">"27"</span> <span class="op">=</span> <span class="st">"d2019"</span>, <span class="st">"28"</span> <span class="op">=</span> <span class="st">"r2019"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"29"</span> <span class="op">=</span> <span class="st">"d2020"</span>, <span class="st">"31"</span> <span class="op">=</span> <span class="st">"r2020"</span>, <span class="st">"32"</span> <span class="op">=</span> <span class="st">"Clouds2021"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"33"</span> <span class="op">=</span> <span class="st">"d2021"</span>, <span class="st">"34"</span> <span class="op">=</span> <span class="st">"r2021"</span></span></span>
<span class="r-in"><span>        <span class="op">)</span>,</span></span>
<span class="r-in"><span>        progress <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co">#' Open classification map</span></span></span>
<span class="r-in"><span>    <span class="va">data_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/raster/classif"</span>, package <span class="op">=</span> <span class="st">"sits"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">ro_class</span> <span class="op">&lt;-</span> <span class="fu"><a href="sits_cube.html">sits_cube</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        source <span class="op">=</span> <span class="st">"MPC"</span>,</span></span>
<span class="r-in"><span>        collection <span class="op">=</span> <span class="st">"SENTINEL-2-L2A"</span>,</span></span>
<span class="r-in"><span>        data_dir <span class="op">=</span> <span class="va">data_dir</span>,</span></span>
<span class="r-in"><span>        parse_info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>            <span class="st">"X1"</span>, <span class="st">"X2"</span>, <span class="st">"tile"</span>, <span class="st">"start_date"</span>, <span class="st">"end_date"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"band"</span>, <span class="st">"version"</span></span></span>
<span class="r-in"><span>        <span class="op">)</span>,</span></span>
<span class="r-in"><span>        bands <span class="op">=</span> <span class="st">"class"</span>,</span></span>
<span class="r-in"><span>        labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>            <span class="st">"1"</span> <span class="op">=</span> <span class="st">"ClearCut_Fire"</span>, <span class="st">"2"</span> <span class="op">=</span> <span class="st">"ClearCut_Soil"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"3"</span> <span class="op">=</span> <span class="st">"ClearCut_Veg"</span>, <span class="st">"4"</span> <span class="op">=</span> <span class="st">"Forest"</span></span></span>
<span class="r-in"><span>        <span class="op">)</span>,</span></span>
<span class="r-in"><span>        progress <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co"># Reclassify cube</span></span></span>
<span class="r-in"><span>    <span class="va">ro_mask</span> <span class="op">&lt;-</span> <span class="fu">sits_reclassify</span><span class="op">(</span></span></span>
<span class="r-in"><span>        cube <span class="op">=</span> <span class="va">ro_class</span>,</span></span>
<span class="r-in"><span>        mask <span class="op">=</span> <span class="va">prodes2021</span>,</span></span>
<span class="r-in"><span>        rules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>            <span class="st">"Old_Deforestation"</span> <span class="op">=</span> <span class="va">mask</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>                <span class="st">"d2007"</span>, <span class="st">"d2008"</span>, <span class="st">"d2009"</span>,</span></span>
<span class="r-in"><span>                <span class="st">"d2010"</span>, <span class="st">"d2011"</span>, <span class="st">"d2012"</span>,</span></span>
<span class="r-in"><span>                <span class="st">"d2013"</span>, <span class="st">"d2014"</span>, <span class="st">"d2015"</span>,</span></span>
<span class="r-in"><span>                <span class="st">"d2016"</span>, <span class="st">"d2017"</span>, <span class="st">"d2018"</span>,</span></span>
<span class="r-in"><span>                <span class="st">"r2010"</span>, <span class="st">"r2011"</span>, <span class="st">"r2012"</span>,</span></span>
<span class="r-in"><span>                <span class="st">"r2013"</span>, <span class="st">"r2014"</span>, <span class="st">"r2015"</span>,</span></span>
<span class="r-in"><span>                <span class="st">"r2016"</span>, <span class="st">"r2017"</span>, <span class="st">"r2018"</span>,</span></span>
<span class="r-in"><span>                <span class="st">"d2019"</span>, <span class="st">"r2019"</span>, <span class="st">"d2020"</span>,</span></span>
<span class="r-in"><span>                <span class="st">"r2020"</span>, <span class="st">"r2021"</span></span></span>
<span class="r-in"><span>            <span class="op">)</span>,</span></span>
<span class="r-in"><span>            <span class="st">"Water_Mask"</span> <span class="op">=</span> <span class="va">mask</span> <span class="op">==</span> <span class="st">"Water"</span>,</span></span>
<span class="r-in"><span>            <span class="st">"NonForest_Mask"</span> <span class="op">=</span> <span class="va">mask</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NonForest"</span>, <span class="st">"NonForest2"</span><span class="op">)</span></span></span>
<span class="r-in"><span>        <span class="op">)</span>,</span></span>
<span class="r-in"><span>        memsize <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>        multicores <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>        output_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        version <span class="op">=</span> <span class="st">"ex_reclassify"</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rolf Simoes, Gilberto Camara, Felipe Souza, Felipe Carlos.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

